{% extends 'federation/base.html' %}
{% block css %}
  <style>
    .htmx-indicator {
      opacity: 0;
      transition: opacity 500ms ease-in;
    }

    .htmx-request .htmx-indicator {
      opacity: 1
    }

    .htmx-request.htmx-indicator {
      opacity: 1
    }
  </style>
{% endblock %}
{% block content %}
  <div class="page-wrapper">
    <div class="page-header d-print-none">
      <div class="container-xl">
        <div class="row g-2 align-items-center">
          <div class="col">
            <h2 class="page-title">
              Search for collaborator
            </h2>
          </div>
        </div>
      </div>
    </div>

    <div class="page-body">
      <div class="container-xl">
        <div class="card">
          <div class="card-body">
            <div>
              {% csrf_token %}
              <input class="form-control"
                     type="search"
                     name="query"
                     placeholder="Search for name or organization"
                     hx-post="{% url 'federation:invitation:query' %}?project={{ project.pk }}"
                     hx-trigger="input changed delay:500ms, search"
                     hx-target="#search-results"
                     hx-include="input[name='csrfmiddlewaretoken']"
                     hx-indicator=".htmx-indicator">
            </div>
            <div class="progress progress-sm htmx-indicator">
              <div class="progress-bar progress-bar-indeterminate"></div>
            </div>
            <div class="mt-2">
              <div id="search-results"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% csrf_token %}
{% endblock %}

