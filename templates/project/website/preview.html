{% load core_tags %}
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ project.name }} - Research Cohort</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .affiliation-content a {
            color: #2563eb !important;
            text-decoration: underline !important;
        }
        .affiliation-content a:hover {
            color: #1e40af !important;
          text-decoration: none !important;
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                <!-- Title -->
                <div>
                    <h1 class="text-4xl font-bold">{{ project.name }}</h1>
                    {% if website and website.slogan %}
                        <p class="mt-2 text-blue-100 text-lg">{{ website.slogan }}</p>
                    {% endif %}
                </div>

                <!-- Navigation -->
                <nav>
                    <ul class="flex flex-wrap gap-6 text-sm font-medium">
                        <li><a href="#about" class="hover:text-blue-200 transition-colors">About</a></li>
                        <li><a href="#characteristics" class="hover:text-blue-200 transition-colors">Cohort Details</a></li>
                        <li><a href="#statistics" class="hover:text-blue-200 transition-colors">Statistics</a></li>
                        <li><a href="#contributors" class="hover:text-blue-200 transition-colors">Contributors</a></li>
                        <li><a href="#contact" class="hover:text-blue-200 transition-colors">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- Hero Section -->
        <section class="mb-16">
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl shadow-xl overflow-hidden">
                <div class="px-8 py-12 md:px-12 md:py-16">
                    <div class="max-w-3xl">
                        <h2 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
                            Advancing Medical Research Through Collaboration
                        </h2>
                        <p class="text-xl text-gray-700 mb-8 leading-relaxed">
                            This research cohort brings together leading institutions and researchers to build a comprehensive dataset for {{ project.name }}. Join us in pushing the boundaries of computational pathology and precision medicine.
                        </p>
                        <div class="flex flex-wrap gap-4">
                            <a href="#about" class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors inline-flex items-center">
                                Learn More
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>
                            <a href="#contact" class="bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold border-2 border-blue-600 hover:bg-blue-50 transition-colors">
                                Get Involved
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Intended Use Section -->
        <section id="about" class="mb-12">
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                <div class="bg-blue-600 px-6 py-4">
                    <h2 class="text-2xl font-bold text-white">Intended Use</h2>
                </div>
                <div class="p-6">
                    <div class="text-gray-700 text-lg leading-relaxed prose max-w-none">
                        {% if intended_use %}
                            {{ intended_use|markdownify|safe }}
                        {% else %}
                            <p>This cohort is being developed to support cutting-edge research in computational pathology and precision medicine. Researchers will use this data to develop and validate AI-driven diagnostic tools, discover novel biomarkers, and advance our understanding of disease mechanisms.</p>
                        {% endif %}
                    </div>

{#                    {% if website and website.contact_email %}#}
{#                    <div class="mt-6 pt-6 border-t border-gray-200">#}
{#                        <p class="text-gray-600 mb-3">Interested in contributing to this cohort?</p>#}
{#                        <a href="mailto:{{ website.contact_email }}"#}
{#                           class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">#}
{#                            Contact Us: {{ website.contact_email }}#}
{#                        </a>#}
{#                    </div>#}
{#                    {% endif %}#}
                </div>
            </div>
        </section>

        <!-- Cohort Characteristics -->
        <section id="characteristics" class="mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">Cohort Characteristics</h2>

            <div class="grid md:grid-cols-2 gap-6">
                <!-- Population -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-blue-600 mb-3">Target Population</h3>
                    <div class="text-gray-700 prose prose-sm max-w-none">
                        {% if population %}
                            {{ population|markdownify|safe }}
                        {% else %}
                            <p>All patient populations with relevant pathology specimens are encouraged to participate.</p>
                        {% endif %}
                    </div>
                </div>

                <!-- Disease -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-blue-600 mb-3">Disease Focus</h3>
                    <p class="text-gray-700">
                        {% if disease %}
                            {{ disease|join:", " }}
                        {% else %}
                            Multiple disease types accepted
                        {% endif %}
                    </p>
                </div>

                <!-- Tissue Types -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-blue-600 mb-3">Tissue Types</h3>
                    <p class="text-gray-700">
                        {% if tissue %}
                            {{ tissue|join:", " }}
                        {% else %}
                            Various tissue types
                        {% endif %}
                    </p>
                </div>

                <!-- Biomarkers -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-blue-600 mb-3">Biomarkers of Interest</h3>
                    <p class="text-gray-700">
                        {% if biomarkers %}
                            {{ biomarkers|join:", " }}
                        {% else %}
                            Standard pathology markers
                        {% endif %}
                    </p>
                </div>
            </div>
        </section>

        <!-- Statistics -->
        <section id="statistics" class="mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">Current Data</h2>

            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-md p-6 text-white text-center">
                    <div class="text-4xl font-bold mb-2">{{ stats.file_count }}</div>
                    <div class="text-blue-100">Files</div>
                </div>

                <div class="bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg shadow-md p-6 text-white text-center">
                    <div class="text-4xl font-bold mb-2">{{ stats.case_count }}</div>
                    <div class="text-indigo-100">Cases</div>
                </div>

                <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg shadow-md p-6 text-white text-center">
                    <div class="text-4xl font-bold mb-2">{{ stats.total_size|filesizeformat }}</div>
                    <div class="text-purple-100">Total Size</div>
                </div>
            </div>
        </section>

        <!-- Contributors -->
        <section id="contributors" class="mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">Contributors</h2>

            {% if contributors %}
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                {% for contrib in contributors %}
                <div class="bg-white rounded-lg shadow-md p-4">
                    <div class="flex items-start mb-3">
                        <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold mr-4 flex-shrink-0">
                            {{ contrib.member.user.human_readable|default:contrib.member.user.identifier|slice:":1"|upper }}
                        </div>
                        <div class="flex-grow">
                            <div class="font-semibold text-gray-900">
                                {{ contrib.member.user.human_readable|default:contrib.member.user.identifier }}
                            </div>
                            <div class="text-sm text-gray-500">
                                Joined {{ contrib.member.date_created|date:"M Y" }}
                            </div>

                            <!-- Profile Links -->
                            {% if contrib.orcid or contrib.google_scholar or contrib.pubmed %}
                            <div class="flex gap-2 mt-2">
                                {% if contrib.orcid %}
                                <a href="{{ contrib.orcid }}" target="_blank" rel="noopener noreferrer"
                                   class="text-xs text-blue-600 hover:text-blue-800 underline hover:no-underline"
                                   title="ORCID">ORCID</a>
                                {% endif %}
                                {% if contrib.google_scholar %}
                                <a href="{{ contrib.google_scholar }}" target="_blank" rel="noopener noreferrer"
                                   class="text-xs text-blue-600 hover:text-blue-800 underline  hover:no-underline"
                                   title="Google Scholar">Scholar</a>
                                {% endif %}
                                {% if contrib.pubmed %}
                                <a href="{{ contrib.pubmed }}" target="_blank" rel="noopener noreferrer"
                                   class="text-xs text-blue-600 hover:text-blue-800 underline hover:no-underline"
                                   title="PubMed">PubMed</a>
                                {% endif %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="border-t border-gray-200 pt-3 mt-3">
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <div class="text-center bg-blue-50 rounded p-2">
                                <div class="font-bold text-blue-600">{{ contrib.case_count }}</div>
                                <div class="text-gray-600 text-xs">Cases</div>
                            </div>
                            <div class="text-center bg-indigo-50 rounded p-2">
                                <div class="font-bold text-indigo-600">{{ contrib.file_count }}</div>
                                <div class="text-gray-600 text-xs">WSI</div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="bg-white rounded-lg shadow-md p-8 text-center text-gray-500">
                No contributors listed yet. Be the first to join!
            </div>
            {% endif %}
        </section>

        <!-- Contact Section -->
        <section id="contact" class="mb-12">
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                <div class="bg-blue-600 px-6 py-4">
                    <h2 class="text-2xl font-bold text-white">Contact Information</h2>
                </div>
                <div class="p-6">
                    <div class="grid md:grid-cols-2 gap-8">
                        <!-- Responsible Person -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Project Contact</h3>
                            {% if project.created_by %}
                            <div class="flex items-start">
                                <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-2xl mr-4 flex-shrink-0">
                                    {{ project.created_by.human_readable|default:project.created_by.identifier|slice:":1"|upper }}
                                </div>
                                <div>
                                    <p class="font-semibold text-gray-900 text-lg">
                                        {{ project.created_by.human_readable|default:project.created_by.identifier }}
                                    </p>
{#                                    <p class="text-gray-600 text-sm mt-1">Principal Investigator</p>#}
                                    {% if website and website.affiliation %}
                                    <div class="text-gray-600 text-sm mt-1 affiliation-content">
                                      {{ website.affiliation|markdownify|safe }}
                                      </div>
                                    {% endif %}
                                    {% if website and website.contact_email %}
                                    <p class="text-blue-600 mt-2">
                                        <a href="mailto:{{ website.contact_email }}" class="text-blue-600 underline hover:no-underline hover:text-blue-800">
                                            {{ website.contact_email }}
                                        </a>
                                    </p>
                                    {% endif %}
                                </div>
                            </div>
                            {% else %}
                            <p class="text-gray-600">Contact information will be available soon.</p>
                            {% endif %}
                        </div>

                        <!-- How to Get Involved -->
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Get Involved</h3>
                            <p class="text-gray-700 mb-4">
                                We welcome contributions from researchers and institutions worldwide. If you're interested in participating in this cohort:
                            </p>
                            <ul class="space-y-2 text-gray-700 mb-6">
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    Review the cohort characteristics and intended use
                                </li>
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    Ensure your data meets the requirements
                                </li>
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    Reach out to discuss collaboration opportunities
                                </li>
                            </ul>
                            {% if website and website.contact_email %}
                            <a href="mailto:{{ website.contact_email }}"
                               class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                                Send an Inquiry
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Call to Action -->
        {% if website and website.contact_email %}
        <section class="bg-gradient-to-r from-blue-600 to-indigo-700 rounded-lg shadow-lg p-8 text-white text-center">
            <h2 class="text-3xl font-bold mb-4">Ready to Contribute?</h2>
            <p class="text-blue-100 mb-6 text-lg max-w-2xl mx-auto">
                Join our network of contributors advancing medical research and improving patient outcomes through collaborative data sharing.
            </p>
            <a href="mailto:{{ website.contact_email }}"
               class="inline-block bg-white text-blue-600 px-8 py-3 rounded-lg font-bold hover:bg-blue-50 transition-colors">
                Contact Us Today
            </a>
        </section>
        {% endif %}

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <p>&copy; {% now "Y" %} {{ project.name }}. All rights reserved.</p>
            </div>
        </div>
    </footer>

</body>
</html>

