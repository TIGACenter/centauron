{% extends 'challenge/challenge_client/detail.html' %}
{% load core_tags %}
{% block content %}
  <div class="page-wrapper">
    <div class="page-header d-print-none">
      <div class="container-xl">
        <div class="row g-2 align-items-center">
          <div class="col">
            <h2 class="page-title">
              Submissions
            </h2>
          </div>
          <div class="col-auto ms-auto d-print-none">
          </div>
        </div>
      </div>
    </div>
    <div class="page-body">
      <div class="container-xl">
        <div class="row">
          <div class="col-9">
            <div class="card">
              <table class="table table-striped table-bordered">
                <thead>
                <tr>
                  <th>Name</th>
                  <th>User</th>
                  <th>Submitted at</th>
                </tr>
                </thead>
                <tbody>
                {% for s in submissions %}
                  <tr>
                    <td>
                      {% if s.created_by.identifier == request.user.profile.identifier %}
                        <a href="{% url 'challenge_client:challenge-submission-detail' challenge.pk s.pk %}">
                      {% endif %}
                      {{ s.name }}
                      {% if s.created_by.identifier == request.user.profile.identifier %}
                        </a>
                      {% endif %}
                    </td>
                    <td>
                      {{ s.created_by.human_readable }}
                    </td>
                    <td>{{ s.date_created|date:'SHORT_DATETIME_FORMAT' }}</td>
                  </tr>
                {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
          <div class="col-3">
            <div class="card">
              <div class="card-body">
                <a href="{% url 'challenge_client:challenge-submission-create' challenge.pk %}" class="btn btn-primary {% if not submissions_enabled %}disabled{% endif %}">New Submission</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}


